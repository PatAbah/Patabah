document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("dashboard-login-form");function t(t){let n=document.querySelector(".error-message");n||(n=document.createElement("div"),n.className="error-message",e.insertBefore(n,e.querySelector("button"))),n.textContent=t}e.addEventListener("submit",async function(n){n.preventDefault();const o=document.getElementById("access_key").value.trim(),a=e.querySelector('button[type="submit"]'),r=a.textContent;if(o){a.textContent="Verifying...",a.disabled=!0;try{const e=await fetch("/ajax/dashboard/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({access_key:o})}),n=await e.json();n.success?window.location.href="/dashboard":t(n.message||"Invalid access key")}catch(e){console.error("Login error:",e),t("Network error. Please try again.")}finally{a.textContent=r,a.disabled=!1}}else t("Please enter your access key")})});